import{j as e}from"./ui-Ct5cQbGm.js";import{g as s,r as a,h as t}from"./router-BzeIgkns.js";import{c as l,j as r,B as c,C as i,d as n,h as d,a as m,b as o}from"./index-BGFRk5FI.js";import{S as x,a as h,b as u,c as j,d as f}from"./select-DUYTiiHq.js";import{B as p}from"./badge-CutB9wkN.js";import{g,p as N,X as v,A as y,r as w,m as b,aq as k,x as C,ar as S,n as F,L as R,h as z,as as D,u as A,at as E,J as L}from"./icons-MbMX8aHs.js";import{L as T}from"./label-CU6ShTwc.js";import{I as q}from"./input-C3c5IdTo.js";import"./vendor-DEQ385Nk.js";import"./utils-Bmne0XXo.js";import"./firebase-rW0Qch21.js";import"./index-jVOyRz7F.js";function B({id:s,checked:a,onCheckedChange:t,disabled:r=!1,className:c,"aria-label":i}){return e.jsx("button",{id:s,type:"button",role:"checkbox","aria-checked":a,"aria-label":i,disabled:r,className:l("flex h-4 w-4 items-center justify-center rounded-sm border border-gray-300 bg-white","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","disabled:cursor-not-allowed disabled:opacity-50",a&&"bg-blue-600 border-blue-600 text-white","hover:border-gray-400 transition-colors",c),onClick:()=>!r&&t(!a),children:a&&e.jsx(g,{className:"h-3 w-3"})})}function M({className:t,placeholder:d="Search apps, templates, users...",showFullInterface:m=!1}){const o=s(),{query:x,search:h,clearSearch:u,getSuggestions:j,quickSearch:f,recentSearches:g,popularSearches:k,loading:C}=r(),[S,F]=a.useState(x),[R,z]=a.useState([]),[D,A]=a.useState([]),[E,L]=a.useState(!1),[T,B]=a.useState(-1),M=a.useRef(null),P=a.useRef(null),I=a.useRef();a.useEffect(()=>{function e(e){M.current&&!M.current.contains(e.target)&&(L(!1),B(-1))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),a.useEffect(()=>(I.current&&clearTimeout(I.current),S.trim().length>0?I.current=setTimeout(async()=>{try{const[e,s]=await Promise.all([j(S),f(S)]);z(e),A(s)}catch(e){}},300):(z([]),A([])),()=>{I.current&&clearTimeout(I.current)}),[S,j,f]);const $=async e=>{e.trim()&&(await h(e),L(!1),B(-1),m||o(`/search?q=${encodeURIComponent(e)}`))},J=e=>{F(e),$(e)},U=e=>{L(!1),o(e.url)},O=E&&(S.length>0||g.length>0||k.length>0);return e.jsxs("div",{ref:M,className:l("relative",t),children:[e.jsxs("form",{onSubmit:e=>{e.preventDefault(),$(S)},className:"relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(q,{ref:P,type:"text",placeholder:d,value:S,onChange:e=>{const s=e.target.value;F(s),L(!0),B(-1)},onFocus:()=>L(!0),onKeyDown:e=>{const s=[...R,...D.map(e=>e.title)];if("ArrowDown"===e.key)e.preventDefault(),B(e=>(e+1)%s.length);else if("ArrowUp"===e.key)e.preventDefault(),B(e=>e<=0?s.length-1:e-1);else if("Enter"===e.key)if(e.preventDefault(),T>=0&&T<s.length){const e=s[T];if(T<R.length)J(e);else{const e=T-R.length;U(D[e])}}else $(S);else"Escape"===e.key&&(L(!1),B(-1),P.current?.blur())},className:"pl-10 pr-10"}),(S||C)&&e.jsxs("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 flex items-center gap-1",children:[C&&e.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-primary border-t-transparent"}),S&&e.jsx(c,{type:"button",variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>{F(""),u(),z([]),A([]),L(!1),P.current?.focus()},children:e.jsx(v,{className:"h-3 w-3"})})]})]}),m&&e.jsxs(c,{type:"submit",className:"ml-2",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Search"]})]}),O&&e.jsx(i,{className:"absolute top-full left-0 right-0 mt-1 z-50 max-h-96 overflow-hidden shadow-lg",children:e.jsx(n,{className:"p-0",children:e.jsxs("div",{className:"max-h-96 overflow-y-auto",children:[D.length>0&&e.jsxs("div",{className:"border-b border-border",children:[e.jsx("div",{className:"px-3 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Quick Results"}),D.map((s,a)=>{const t=R.length+a;return e.jsxs("button",{className:l("w-full px-3 py-2 text-left hover:bg-muted/50 flex items-center justify-between group",T===t&&"bg-muted"),onClick:()=>U(s),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[s.thumbnail?e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-8 h-8 rounded object-cover flex-shrink-0"}):e.jsx("div",{className:"w-8 h-8 rounded bg-muted flex items-center justify-center flex-shrink-0",children:e.jsx(N,{className:"h-4 w-4 text-muted-foreground"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-sm truncate",children:s.title}),e.jsx("div",{className:"text-xs text-muted-foreground truncate",children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[e.jsx(p,{variant:"secondary",className:"text-xs",children:s.type}),e.jsx(y,{className:"h-3 w-3 text-muted-foreground opacity-0 group-hover:opacity-100 transition-opacity"})]})]},s.id)})]}),R.length>0&&e.jsxs("div",{className:"border-b border-border",children:[e.jsx("div",{className:"px-3 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Suggestions"}),R.map((s,a)=>e.jsxs("button",{className:l("w-full px-3 py-2 text-left hover:bg-muted/50 flex items-center gap-3",T===a&&"bg-muted"),onClick:()=>J(s),children:[e.jsx(N,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:s})]},s))]}),0===S.length&&g.length>0&&e.jsxs("div",{className:"border-b border-border",children:[e.jsx("div",{className:"px-3 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Recent Searches"}),g.slice(0,5).map(s=>e.jsxs("button",{className:"w-full px-3 py-2 text-left hover:bg-muted/50 flex items-center gap-3",onClick:()=>J(s),children:[e.jsx(w,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:s})]},s))]}),0===S.length&&k.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"px-3 py-2 text-xs font-medium text-muted-foreground uppercase tracking-wide",children:"Popular Searches"}),k.slice(0,5).map(s=>e.jsxs("button",{className:"w-full px-3 py-2 text-left hover:bg-muted/50 flex items-center gap-3",onClick:()=>J(s),children:[e.jsx(b,{className:"h-4 w-4 text-muted-foreground flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:s})]},s))]}),S.length>0&&0===R.length&&0===D.length&&!C&&e.jsxs("div",{className:"px-3 py-8 text-center text-muted-foreground",children:[e.jsx(N,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-sm",children:"No suggestions found"}),e.jsx("p",{className:"text-xs",children:"Press Enter to search anyway"})]})]})})})]})}function P({icon:s,title:a,description:t,actions:r,className:c,variant:i="default"}){return e.jsxs("div",{className:l("flex flex-col items-center justify-center p-8 text-center",c),children:[e.jsx("div",{className:l("w-16 h-16 mb-4 flex items-center justify-center rounded-full bg-gray-100","success"===i&&"bg-green-100","warning"===i&&"bg-yellow-100","error"===i&&"bg-red-100","info"===i&&"bg-blue-100"),children:e.jsx(s,{className:l("w-8 h-8",{default:"text-gray-600",success:"text-green-600",warning:"text-yellow-600",error:"text-red-600",info:"text-blue-600"}[i])})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:a}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md",children:t}),r&&e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:r})]})}function I({title:s="No items found",description:a="There are no items to display at the moment.",action:t,className:l}){return e.jsx(P,{icon:k,title:s,description:a,actions:t,...l&&{className:l}})}function $({size:s="md",className:a,text:t}){return e.jsxs("div",{className:l("flex flex-col items-center justify-center space-y-2",a),children:[e.jsx(C,{className:l("animate-spin text-blue-600",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"}[s])}),t&&e.jsx("p",{className:"text-sm text-gray-600 animate-pulse",children:t})]})}function J(){const l=s(),[g,N]=t(),{showSuccess:y}=d(),{query:w,results:b,filters:k,loading:C,hasMore:z,totalResults:D,search:A,updateFilters:E,loadMore:L}=r(),[q,P]=a.useState("grid"),[J,O]=a.useState(!1),[V,G]=a.useState(k);a.useEffect(()=>{const e=g.get("q");e&&e!==w&&A(e)},[g,A,w]),a.useEffect(()=>{w&&N({q:w})},[w,N]);const K=()=>{const e={sortBy:"relevance",sortOrder:"desc"};G(e),E(e)},Q=e=>{l(e.url)},H=e=>{y("Liked!","Added to your favorites")},W=e=>new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e),X=Object.values(V).filter(e=>Array.isArray(e)?e.length>0:"object"==typeof e&&null!==e||void 0!==e&&"relevance"!==e&&"desc"!==e).length;return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Search"}),e.jsx(M,{showFullInterface:!0,className:"max-w-2xl"}),w&&e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("p",{className:"text-muted-foreground",children:C?"Searching...":`${D} results for "${w}"`}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>O(!J),className:"relative",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),"Filters",X>0&&e.jsx(p,{variant:"destructive",className:"ml-2 text-xs px-1 min-w-[1.25rem] h-5",children:X})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(x,{value:k.sortBy||"relevance",onValueChange:e=>E({sortBy:e}),children:[e.jsx(h,{className:"w-40",children:e.jsx(u,{})}),e.jsxs(j,{children:[e.jsx(f,{value:"relevance",children:"Relevance"}),e.jsx(f,{value:"date",children:"Date"}),e.jsx(f,{value:"rating",children:"Rating"}),e.jsx(f,{value:"downloads",children:"Downloads"}),e.jsx(f,{value:"alphabetical",children:"Alphabetical"})]})]}),e.jsxs("div",{className:"flex border rounded-md",children:[e.jsx(c,{variant:"grid"===q?"default":"ghost",size:"sm",onClick:()=>P("grid"),className:"rounded-r-none",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx(c,{variant:"list"===q?"default":"ghost",size:"sm",onClick:()=>P("list"),className:"rounded-l-none",children:e.jsx(R,{className:"h-4 w-4"})})]})]})]})]}),e.jsxs("div",{className:"flex gap-6",children:[J&&e.jsxs(i,{className:"w-80 h-fit",children:[e.jsx(m,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(o,{className:"text-lg",children:"Filters"}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>O(!1),children:e.jsx(v,{className:"h-4 w-4"})})]})}),e.jsxs(n,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{className:"text-sm font-medium",children:"Content Type"}),e.jsx("div",{className:"space-y-2",children:["app","template","user","documentation"].map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:s,checked:V.type?.includes(s)||!1,onCheckedChange:e=>{const a=V.type||[],t=e?[...a,s]:a.filter(e=>e!==s);G({...V,type:t})}}),e.jsx(T,{htmlFor:s,className:"text-sm capitalize",children:s})]},s))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{className:"text-sm font-medium",children:"Category"}),e.jsx("div",{className:"space-y-2",children:["Business","Marketing","Communication","Productivity","Entertainment"].map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:s,checked:V.category?.includes(s)||!1,onCheckedChange:e=>{const a=V.category||[],t=e?[...a,s]:a.filter(e=>e!==s);G({...V,category:t})}}),e.jsx(T,{htmlFor:s,className:"text-sm",children:s})]},s))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{className:"text-sm font-medium",children:"Framework"}),e.jsx("div",{className:"space-y-2",children:["React","Next.js","Vue.js","Angular","Svelte"].map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:s,checked:V.framework?.includes(s)||!1,onCheckedChange:e=>{const a=V.framework||[],t=e?[...a,s]:a.filter(e=>e!==s);G({...V,framework:t})}}),e.jsx(T,{htmlFor:s,className:"text-sm",children:s})]},s))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{className:"text-sm font-medium",children:"Language"}),e.jsx("div",{className:"space-y-2",children:["TypeScript","JavaScript","Python","Java","Go"].map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:s,checked:V.language?.includes(s)||!1,onCheckedChange:e=>{const a=V.language||[],t=e?[...a,s]:a.filter(e=>e!==s);G({...V,language:t})}}),e.jsx(T,{htmlFor:s,className:"text-sm",children:s})]},s))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(T,{className:"text-sm font-medium",children:"Difficulty"}),e.jsx("div",{className:"space-y-2",children:["beginner","intermediate","advanced"].map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(B,{id:s,checked:V.difficulty?.includes(s)||!1,onCheckedChange:e=>{const a=V.difficulty||[],t=e?[...a,s]:a.filter(e=>e!==s);G({...V,difficulty:t})}}),e.jsx(T,{htmlFor:s,className:"text-sm capitalize",children:s})]},s))})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(c,{onClick:()=>{E(V),O(!1)},className:"flex-1",children:"Apply Filters"}),e.jsx(c,{variant:"outline",onClick:K,children:"Clear"})]})]})]}),e.jsx("div",{className:"flex-1 space-y-6",children:C&&0===b.length?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx($,{size:"lg"})}):0===b.length&&w?e.jsx(I,{title:"No results found",description:`No results found for "${w}". Try adjusting your search terms or filters.`,action:e.jsx(c,{onClick:K,children:"Clear Filters"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid"===q?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:b.map(s=>e.jsx(U,{result:s,viewMode:q,onResultClick:Q,onLikeResult:H,formatDate:W},s.id))}),z&&e.jsx("div",{className:"flex justify-center pt-6",children:e.jsx(c,{onClick:L,disabled:C,children:C?"Loading...":"Load More"})})]})})]})]})}function U({result:s,viewMode:a,onResultClick:t,onLikeResult:l,formatDate:r}){return"list"===a?e.jsx(i,{className:"hover:shadow-md transition-shadow cursor-pointer",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[s.thumbnail&&e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-20 h-20 rounded-lg object-cover flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-semibold text-lg cursor-pointer hover:text-primary",onClick:()=>t(s),children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[s.metadata?.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm",children:s.metadata.rating})]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>l(s.id),children:e.jsx(D,{className:"h-4 w-4"})})]})]}),e.jsx("p",{className:"text-muted-foreground text-sm mb-3 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.author&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"h-3 w-3"}),s.author.name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"}),r(s.updatedAt)]}),s.metadata?.downloads&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{className:"h-3 w-3"}),s.metadata.downloads]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{variant:"secondary",children:s.type}),s.metadata?.framework&&e.jsx(p,{variant:"outline",children:s.metadata.framework})]})]})]})]})})}):e.jsxs(i,{className:"hover:shadow-md transition-shadow cursor-pointer",children:[e.jsxs("div",{className:"aspect-video relative overflow-hidden rounded-t-lg",children:[s.thumbnail?e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-muted flex items-center justify-center",children:e.jsx(N,{className:"h-12 w-12 text-muted-foreground"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(c,{variant:"secondary",size:"sm",onClick:e=>{e.stopPropagation(),l(s.id)},children:e.jsx(D,{className:"h-4 w-4"})})})]}),e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-1 cursor-pointer hover:text-primary line-clamp-1",onClick:()=>t(s),children:s.title}),e.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.metadata?.rating&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"h-4 w-4 text-yellow-400 fill-current"}),e.jsx("span",{className:"text-sm",children:s.metadata.rating})]}),s.metadata?.downloads&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-muted-foreground",children:[e.jsx(L,{className:"h-3 w-3"}),s.metadata.downloads]})]}),e.jsx(p,{variant:"secondary",children:s.type})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.author&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{className:"h-3 w-3"}),s.author.name]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"}),r(s.updatedAt)]})]}),s.tags.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags.slice(0,3).map(s=>e.jsx(p,{variant:"outline",className:"text-xs",children:s},s)),s.tags.length>3&&e.jsxs(p,{variant:"outline",className:"text-xs",children:["+",s.tags.length-3]})]})]})})]})}export{J as default};
//# sourceMappingURL=SearchPage-DzdUh-dz.js.map
